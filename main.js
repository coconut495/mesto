(()=>{"use strict";var e,t,n,o,r={49:(e,t,n)=>{n.d(t,{E$:()=>r,Gu:()=>c,HL:()=>l,Ln:()=>s,TX:()=>d,Uy:()=>a,nC:()=>u,on:()=>i});var o={baseUrl:"https://nomoreparties.co/v1/frontend-st-cohort-201",headers:{authorization:"49faf678-f318-4bf2-b688-72b38208500f","Content-Type":"application/json"}},r=function(){return fetch("".concat(o.baseUrl,"/users/me"),{headers:o.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))},c=function(e){return fetch("".concat(o.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:o.headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))},a=function(e,t){return fetch("".concat(o.baseUrl,"/users/me"),{method:"PATCH",headers:o.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))},i=function(){return fetch("".concat(o.baseUrl,"/cards"),{headers:o.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))},s=function(e,t){return fetch("".concat(o.baseUrl,"/cards"),{method:"POST",headers:o.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))},u=function(e){return fetch("".concat(o.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:o.headers}).then((function(e){return e.ok?Promise.resolve():Promise.reject("Ошибка: ".concat(e.status))}))},l=function(e){return fetch("".concat(o.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:o.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))},d=function(e){return fetch("".concat(o.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:o.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},694:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{GO:()=>u,io:()=>s,no:()=>l,zY:()=>i});var r=n(497),c=n(49),a=e([r]);r=(a.then?(await a)():a)[0];var i=function(e,t,n,o,c){var a=r.Tp.querySelector(".card").cloneNode(!0);if(a.id=e,a.querySelector(".card__image").src=t,a.querySelector(".card__title").textContent=n,o===r.vm){var i=a.querySelector(".card__delete-button");i.removeAttribute("disabled"),i.style.visibility="visible"}return c&&(a.querySelector(".card__likes-count").textContent=c.length,c.forEach((function(e){e.name===r.nT&&a.querySelector(".card__like-button").classList.add("card__like-button_is-active")}))),a},s=function(e){var t=e.closest(".card"),n=e.classList,o=t.querySelector(".card__likes-count");n.contains("card__like-button_is-active")?(0,c.TX)(t.id).then((function(e){o.textContent=e.likes.length,n.remove("card__like-button_is-active")})).catch((function(e){console.log(e)})):(0,c.HL)(t.id).then((function(e){o.textContent=e.likes.length,n.add("card__like-button_is-active")})).catch((function(e){console.log(e)}))},u=function(e){var t=e.closest(".card");(0,c.nC)(t.id).then((function(){r.dm.removeChild(t)})).catch((function(e){console.log(e)}))},l=function(e){r.Sl.src=e.src,(0,r.qf)(r.y6)};o()}catch(e){o(e)}}))},947:(e,t,n)=>{n.d(t,{Oo:()=>r,_f:()=>s,bY:()=>i,qf:()=>o});var o=function(e){e.classList.add("popup_is-opened"),e.addEventListener("click",c),document.addEventListener("keydown",a)},r=function(e){e.classList.remove("popup_is-opened"),e.addEventListener("click",c),document.removeEventListener("keydown",a)},c=function(e){if(e.target.classList.contains("popup_is-opened")||e.target.classList.contains("popup__close")){var t=document.querySelector(".popup_is-opened");r(t)}},a=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");r(t)}},i=function(e,t){t?(e.textContent="Сохранение...",e.setAttribute("disabled",!0)):(e.textContent="Сохранить",e.removeAttribute("disabled"))},s=function(e){e.classList.add("popup__button_disabled")}},814:(e,t,n)=>{n.d(t,{F:()=>r});var o=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n.inactiveButtonClass),t.removeAttribute("disabled")):(t.classList.add(n.inactiveButtonClass),t.setAttribute("disabled",!0))},r=function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);o(n,r,t),n.forEach((function(c){c.addEventListener("input",(function(){!function(e,t,n){t.validity.valid?function(e,t,n){var o=e.querySelector(".".concat(t.name,"-error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorClass),o.textContent=""}(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.name,"-error"));t.classList.add(o.inputErrorClass),r.classList.add(o.errorClass),r.textContent=n}(e,t,t.validationMessage,n)}(e,c,t),o(n,r,t)}))}))}(t,e)}))}},497:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{Sl:()=>w,Tp:()=>d,dm:()=>_,nT:()=>c,qf:()=>a.qf,vm:()=>r,y6:()=>x});var r,c,a=n(947),i=n(814),s=n(694),u=n(49),l=e([s]);s=(l.then?(await l)():l)[0];var d=document.querySelector("#card-template").content,f=document.querySelector(".profile__image"),p=document.querySelector(".profile__title"),m=document.querySelector(".profile__description"),_=document.querySelector(".places__list"),v=document.querySelector(".popup_type_avatar"),h=document.forms["edit-avatar"],b=h.elements.link,y=document.querySelector(".popup_type_edit"),S=document.forms["edit-profile"],k=S.elements.name,q=S.elements.description,L=document.querySelector(".popup_type_new-card"),E=document.forms["new-place"],C=E.elements["place-name"],g=E.elements.link,x=document.querySelector(".popup_type_image"),w=x.querySelector(".popup__image"),j=document.querySelector(".profile__image-container"),P=h.elements[1],O=document.querySelector(".profile__edit-button"),T=S.elements[2],U=document.querySelector(".profile__add-button"),A=E.elements[2];j.addEventListener("click",(function(){(0,a.qf)(v)})),h.addEventListener("submit",(function(e){(0,a.bY)(P,!0),(0,u.Gu)(b.value).then((function(e){f.src=e.avatar,(0,a.Oo)(v),h.reset(),(0,a._f)(P)})).catch((function(e){console.log(e)})).finally((function(){(0,a.bY)(P,!1)}))})),_.addEventListener("click",(function(e){var t=e.target;t.classList.contains("card__like-button")?(0,s.io)(t):t.classList.contains("card__delete-button")?(0,s.GO)(t):t.classList.contains("card__image")&&(0,s.no)(t)})),O.addEventListener("click",(function(){k.value=document.querySelector(".profile__title").textContent,q.value=document.querySelector(".profile__description").textContent,(0,a.qf)(y)})),S.addEventListener("submit",(function(e){(0,a.bY)(T,!0),(0,u.Uy)(k.value,q.value).then((function(e){p.textContent=e.name,m.textContent=e.about,(0,a.Oo)(y),(0,a._f)(T)})).catch((function(e){console.log(e)})).finally((function(){(0,a.bY)(T,!1)}))})),U.addEventListener("click",(function(){(0,a.qf)(L)})),E.addEventListener("submit",(function(e){(0,a.bY)(A,!0),(0,u.Ln)(C.value,g.value).then((function(e){_.prepend((0,s.zY)(e._id,e.link,e.name,e.owner._id,e.likes.length)),(0,a.Oo)(L),E.reset(),(0,a._f)(A)})).catch((function(e){console.log(e)})).finally((function(){(0,a.bY)(A,!1)}))})),await(0,u.E$)().then((function(e){r=e._id,c=e.name,f.src=e.avatar,p.textContent=e.name,m.textContent=e.about})).catch((function(e){console.log(e)})),(0,u.on)().then((function(e){e.forEach((function(e){_.append((0,s.zY)(e._id,e.link,e.name,e.owner._id,e.likes))}))})).catch((function(e){console.log(e)})),(0,i.F)({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),o()}catch(e){o(e)}}),1)}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return r[e](n,n.exports,a),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(r,c,a)=>{var i;a&&((i=[]).d=-1);var s,u,l,d=new Set,f=r.exports,p=new Promise(((e,t)=>{l=t,u=e}));p[t]=f,p[e]=e=>(i&&e(i),d.forEach(e),p.catch((e=>{}))),r.exports=p,c((r=>{var c;s=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var c=[];c.d=0,r.then((e=>{a[t]=e,o(c)}),(e=>{a[n]=e,o(c)}));var a={};return a[e]=e=>e(c),a}}var i={};return i[e]=e=>{},i[t]=r,i})))(r);var a=()=>s.map((e=>{if(e[n])throw e[n];return e[t]})),u=new Promise((t=>{(c=()=>t(a)).r=0;var n=e=>e!==i&&!d.has(e)&&(d.add(e),e&&!e.d&&(c.r++,e.push(c)));s.map((t=>t[e](n)))}));return c.r?u:a()}),(e=>(e?l(p[n]=e):u(f),o(i)))),i&&i.d<0&&(i.d=0)},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(497)})();